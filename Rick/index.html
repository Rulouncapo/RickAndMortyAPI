
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Api</title>
</head>
<body>
 <h1>Personajes</h1>
 <style>
     #main{
         display: flex;
         flex-wrap: wrap;
     }
     .pora{
         display: flex;
         flex-direction: column;
         font-size: 1.3em;
         font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
         margin: 10px;
        }
     .pora p{
         margin: 0px;
     }
 </style>
 <form action="index.php">
          <input name="id" type="text" id="buscar">
          <button id="btn">Ingreso</button>
 </form>
 <nav id="navegador">
     
 </nav>

 <main id="main">
     
 </main>
 <script>
         var d = document;
         var main = d.getElementById("main");
         var nav = d.getElementById("navegador");
async function getResponse() {
	var response = await fetch('index.php',{method: 'GET'})
    .then(res=>res.json())
    .then(res=>
        crear(res)
    );
}
    // getResponse();
    var cont = 0;

function creador() {
    for (let d = 1; d < 43; d++) {
        let btn = document.createElement("button");
        var num = d;
        btn.setAttribute("atributo", num);
        btn.innerText=d;
        nav.appendChild(btn)
    }
    var botones = d.querySelectorAll("[atributo]");
    for (let i = 0; i < 43; i++) {
        botones[i].addEventListener('click',()=>{
            cont++;
            console.log(cont);
            if (cont>1) {
                let divs = document.querySelectorAll(".pora ");
                console.log(divs);
                console.log(divs[1]);

                for (let e = 0; e < divs.length; e++) {
                    main.removeChild(divs[e]);
                }
            }                  
            let btn = botones[i].innerText;
            let data = new FormData();
            data.append("nombre", btn);
            console.log(btn)
            fetch("index.php", {
                method:"post",
                body:data
            }).then(res=>res.json()).then(res=>crear(res));
        })

                
    }
   
}
    
creador();
function crear(respo){
            console.log(respo[1]);
            for (let i = 0; i < 1; i++) {
                respo[1].forEach(e => {
                    let deso             = d.createElement("div");
                    deso.classList+= "pora ";
                    for (let er = 1; er < e.length; er++) {
                        let nombre           = document.createElement("p");
                        nombre.innerText=e[er];
                        deso.appendChild(nombre)
                        main.appendChild(deso);
                        

                        }                  
                    }
                );               
            };
        
            }
                
    
    
     </script>
</body>
</html>